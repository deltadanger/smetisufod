{% extends "base.html" %}

{% load url from future %}

{% block title %}D&eacute;velopeurs{% endblock %}

{% block js %}
<script src="{% url "jquery_plugin" %}"></script>
<script>
    $(function() {
        $(".item-lookup.link").lookupitem({"makeLink": true});
        $(".item-lookup").lookupitem();
    });
</script>
{% endblock %}

{% block css %}
<link rel="stylesheet" type="text/css" href="{% url "jquery_plugin_css" %}">
<style>
h1 {
    color: #94855A;
    margin: 20px;
}
</style>
{% endblock %}

{% block content %}

<p>
    Cette section d&eacute;taille les diff&eacute;rentes fonctionalit&eacute;s disponibles via ce site.<br />
    Le site met &agrave; la disposition de qui veut l'utiliser un web-service permettant la recherche d'objets dans la base de donn&eacute;es du site.
    <a href="#web-service">Sp&eacute;cifications</a>
    <br />
    Le site fournit aussi un plugin jQuery permettant d'afficher les caract&eacute;ristiques d'un objet au survol d'un &eacute;l&eacute;ment de page web.
    <a href="#jquery-plugin">Sp&eacute;cifications</a>
</p>

<section id="web-service">
    <h1>Web Service</h1>
    <div>
        <p>
            Le site propose un web-service disponible &agrave; l'adresse {{ search_full_url }} pour la recherche d'objets. <br />
            La requ&ecirc;te est &agrave; faire avec la m&eacute;thode http GET. <br />
            Les param&egrave;tres possibles pour cette requ&ecirc;te sont d&eacute;taill&eacute;s dans le tableau suivant:
        </p>
        <table>
            <tr>
                <th>Nom du param&egrave;tre</th>
                <th>Description</th>
                <th>Valeurs possibles</th>
                <th>Exemple</th>
                <th>Effet si non fourni</th>
            </tr>
            <tr>
                <td>json</td>
                <td>Indique si les r&eacute;sultats doivent &ecirc;tre renvoy&eacute; en JSON.</td>
                <td><span class="code">true</span>, <span class="code">false</span></td>
                <td><span class="code">/search?json=true</span></td>
                <td>Si ce param&egrave;tre n'est pas fourni ou est &agrave; <span class="code">false</span>, la requ&ecirc;te &eacute;chouera.</td>
            </tr>
            <tr>
                <td>name</td>
                <td>La valeur de ce param&egrave;tre sera contenue dans les noms des objets retourn&eacute;s. Non sensible &agrave; la casse.</td>
                <td>Chaine de caract&egrave;re</td>
                <td><span class="code">/search?name=bouftou</span></td>
                <td>Pas de restriction sur les noms des objets retourn&eacute;s</td>
            </tr>
            <tr>
                <td>type</td>
                <td>Les types des objets retourn&eacute;s. Ce param&egrave;tre peut &ecirc;tre pr&eacute;sent plusieurs fois pour sp&eacute;cifier les diff&eacute;rents types possibles.</td>
                <td>
                    {% for type in types %}
                    <span class="code">{{ type }}</span>{% if not forloop.last %}, {% endif %}
                    {% endfor %}
                </td>
                <td><span class="code">/search?type=Anneau&amp;type=Amulette</span></td>
                <td>Pas de restriction sur les types des objets retourn&eacute;s</td>
            </tr>
            <tr>
                <td>level-min ; level-max</td>
                <td>Les niveaux minimums et maximums des objets retourn&eacute;s.</td>
                <td>Entier</td>
                <td><span class="code">/search?level-min=10&amp;level-max=20</span></td>
                <td>Pas de restriction sur les niveaux des objets retourn&eacute;s</td>
            </tr>
            <tr>
                <td>recipe</td>
                <td>Le nombre d'ingr&eacute;dients n&eacute;cessaire pour fabriquer les objets. Ce param&egrave;tre peut &ecirc;tre pr&eacute;sent plusieurs fois pour sp&eacute;cifier les diff&eacute;rents nombres d'ingr&eacute;dients possibles.</td>
                <td>Entier</td>
                <td><span class="code">/search?recipe=2&amp;recipe=3&amp;recipe=4</span></td>
                <td>Pas de restriction sur les nombres d'ingr&eacute;dients des recettes des objets retourn&eacute;s</td>
            </tr>
            <tr>
                <td>attribute-X</td>
                <td>Un attribut qui doit &ecirc;tre pr&eacute;sent sur les objets retourn&eacute;s. X est un entier</td>
                <td>Chaine de caract&egrave;re</td>
                <td><span class="code">/search?attribute-1=(dommages Neutre)&amp;attribute-2=PA</span></td>
                <td>Pas de restriction sur les attributs que doivent poss&eacute;der les objets retourn&eacute;s</td>
            </tr>
            <tr>
                <td>value-min-X ; value-max-X</td>
                <td>Les valeurs minimales et maximales de l'attribut X. X est un entier. S'il n'existe pas de param&egrave;tre <span class="code">attribute-X</span>, ces param&egrave;tres sont ignor&eacute;s.</td>
                <td>Entier</td>
                <td><span class="code">/search?attribute-1=Force&amp;value-min-1=50&amp;value-max-1=70</span></td>
                <td>Pas de restriction sur la valeur de l'attribut X des objets retourn&eacute;s</td>
            </tr>
            <tr>
                <td>include-panoplie</td>
                <td>Si pr&eacute;sent, inclut les panoplies dans les r&eacute;sultats de recherche.</td>
                <td><span class="code">on</span></td>
                <td><span class="code">/search?include-panoplie=on</span></td>
                <td>Les r&eacute;sultats de recherche n'incluent que les objets</td>
            </tr>
        </table>
    </div>
</section>

<section id="jquery-plugin">
    <h1>Plugin jQuery</h1>
    <div>
        <p>
            Le site fournit aussi un plugin jQuery.
            Ce plugin permet de transformer un &eacute;l&eacute;ment HTML contenant le nom d'un objet en un bouton qui affichera les caract&eacute;ristiques de l'objet au survol de la souris.<br />
            Exemple d'utilisation : <span class="item-lookup">Marteau du Bouftou</span><br />
            Le plugin est disponible &agrave; l'adresse {{ plugin_url }}.
            Le CSS associ&eacute; est lui aussi fournit par le site et disponible &agrave; l'adresse {{ plugin_css }}.
        </p>
        
        <h2>Pr&eacute;-requis</h2>
        <p>
            Le plugin requiert jQuery et jQuery-UI pour fonctionner.<br />
            Le plugin a &eacute;t&eacute; d&eacute;velop&eacute; avec la version 1.11.0 de jQuery et la version 1.10.4 de jQuery-UI.
        </p>
        
        <h2>Utilisation</h2>
        <p>
            Le plugin rajoute la fonction <span class="code">lookupitem</span> qui peut &ecirc;tre utilis&eacute;e sur tout &eacute;l&eacute;ment du DOM.<br />
            Le contenu HTML de l'&eacute;l&eacute;ment doit &ecirc;tre le nom de l'objet &agrave; afficher.
            Exemple d'utilisation :
            <h3>Code HTML</h3>
            <div class="code">
                &lt;span class="item-lookup"&gt;Marteau du Bouftou&lt;/span&gt;
            </div>
            <h3>Code JavaScript</h3>
            <div class="code">
                $(".item-lookup").lookupitem();
            </div>
        </p>
        
        <h2>Options</h2>
        <p>
            Le plugin fournit une option qui permet de personnaliser son comportement:<br />
            <span class="code">makeLink</span><br />
            Valeurs possibles : <span class="code">true</span>, <span class="code">false</span><br />
            Valeur par d&eacute;faut : <span class="code">false</span><br />
            Description : Si &agrave; <span class="code">true</span>, la cible du plugin sera chang&eacute;e en lien vers ce site vers un r&eacute;sultat de recherche contenant l'objet.<br />
            Exemple : <span class="code">$(".item-lookup").lookupitem({"makeLink": true});</span> : <span class="item-lookup link">Marteau du Bouftou</span>
        </p>
        
    </div>
</section>

<p>
    Pour toute question ou suggestion, n'hesitez pas &agrave; <a href="{% url "contact" %}">me contacter</a>.
</p>

{% endblock %}
